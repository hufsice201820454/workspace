import os
os.environ["OPENAI_API_KEY"] = '보안코드'

from langchain_openai import ChatOpenAI
from langchain.schema import SystemMessage, HumanMessage

llm = ChatOpenAI(
    model="gpt-4o",          # LLM 모델명
    top_p=0.7,               # 확률 분포 Cut-off
    temperature=1.4,         # 창의성
    max_tokens=10000,          # 응답 길이 제한
    streaming=True           # 스트리밍 활성화
)

# 대화 메시지 구성
messages = [
    SystemMessage(content="당신은 스포츠 용품 마케터이며 초보 러너들을 위한 디지털 마케팅을 기획 중입니다."),
    HumanMessage(content= "## 페르소나 1: \"육아 틈새 러너, 민진수 (37세, 부산 해운대구)\"\n\n민진수는 부산 해운대구에서 아내와 두 딸과 함께 사는 초등학교 교사다.\n\n육아와 수업 준비, 가정 경제까지 챙기다 보니 자기 몸은 늘 뒷전이었다.\n\n하지만 최근 건강검진 결과에서 **혈압, 콜레스테롤, 복부비만**이라는 세 단어를 듣고 심각성을 느꼈다.\n\n아이들이 잠든 **새벽 5시**,\n\n아파트 단지 옆 조깅 코스를 30분 뛰는 게 요즘 진수의 유일한 루틴이다.\n\n헬스장은 갈 시간도 없고, 헬스장에 가면 \"아빠 땀냄새 난다\"는 딸의 말이 떠오른다.\n\n그래서 러닝화를 새로 샀고, 아내가 사준 쿨토시와 함께 뛰기 시작했다.\n\n딸이 그려준 \"파워 아빠\" 캐릭터를 프린트한 티셔츠를 입고 달린다.\n\n처음엔 부끄러웠지만, 지금은 그것조차 동기부여다.\n\n---\n\n## 페르소나 2: \"취업 성공, 유승연 (25세, 서울 송파구)\"\n\n- SNS를 좋아함, 하지만 활발히 활동하지는 않고 피드에 욕심이 있음\n- 돈은 취준이라 돈이 막 있지는 않음 (알바함), 곧 취업 예정 (합격을 앞두고 러닝을 하고 싶어함, 괜찮은 취미 자랑)\n- 블로그를 좋아하고, 블로그를 통해 기록하는 것을 좋아함,이걸 토대로 블로그의 카테고리도 채우고 경험도 쌓기를 원함\n- 러닝을 선택한 이유는 필라테스를 하다가 현재 유행하는 러너행사를 참여하고 싶어 시작\n- 운동을 좋아하지만 남자친구를 만나고 싶은 욕망이 더 큼 (그렇지만 드러내지 않음)\n- 운동 경력은 필라테스 1년차\n- 어릴 적에 운동을 좋아해서 뛰는 것에 부담을 느끼지 않음\n- 날씨가 좋은 날에는 야외에서 러닝을 즐기며, 자연 속에서의 활동을 선호함\n\n## 페르소나 3: \"건강하고 싶은 백수, 이재하 (26세, 서울 용산구)\"\n\n- 현재 백수 상태로 시간적 여유가 많아 다양한 활동을 시도할 수 있음\n- 체력이 약해 체력 증진이 주요 목표이며, 이를 통해 건강한 생활 습관을 형성하고자 함\n- 경제적 여유가 많지 않아 가성비를 중요시하며, 비용 대비 효과가 높은 활동을 선호함\n- 러닝을 단순한 운동이 아닌 재미있는 활동으로 만들고 싶어하며, 이를 위해 다양한 콘텐츠와 이벤트에 관심이 많음\n- 러닝을 통해 새로운 사람들을 만나고, 사회적 네트워크를 확장하고자 하는 욕구가 있음\n- 게임 요소가 가미된 러닝 앱이나 챌린지에 참여하는 것을 좋아하며, 이를 통해 성취감을 느끼고자 함\n- 과거 운동 경험은 거의 없으나, 새로운 도전을 통해 자신을 변화시키고자 하는 의지가 강함\n- 날씨가 좋은 날에는 야외에서 러닝을 즐기며, 자연 속에서의 활동을 선호함\n\n## 페르소나 4: “코딩은 앉아서 스트레스는 뛰면서, 김남수 (34세, 서울 용산구)\"\n\n- 대기업 IT 개발자로 근무 중이며, 야근이 잦고 주로 앉아서 일하는 시간이 많음\n- 스트레스를 많이 받는 환경에서 일하며, 퇴근 후 개인 시간이 필요함\n- 만성 피로와 체력 저하로 인해 건강 관리가 절실\n- 반복적인 일상 속에서 리듬감을 줄 수 있는 신체 활동을 원함\n- 주 3회 퇴근 후 집 근처 공원에서 50분 정도 러닝\n- 러닝을 단순한 운동이라 생각하지 않고, 자기관리로 여김\n- 러닝화, 기능성 의류, 스마트 워치 등 러닝 장비에 관심이 많음\n- 유튜브를 통해 러닝 자세, 운동 루틴, 제품 리뷰 등을 자주 시청\n- 정확한 러닝 자세를 모르기 때문에 무릎, 발목, 발바닥 통증을 종종 겪음\n- 지속 가능한 루틴을 위한 가이드"
                 "각 페르소나 별로 10 문항으로 구성 된 인터뷰 질의서를 만들어줘")
]

line = ""
for chunk in llm.stream(messages):
   line += chunk.content
   print(chunk.content, end="", flush=True)
   if len(line) > 100:  # 100자마다 줄바꿈
       print()
       line = ""
