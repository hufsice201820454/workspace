import os
os.environ["OPENAI_API_KEY"] = '보안코드'

from langchain_openai import ChatOpenAI
from langchain.schema import SystemMessage, HumanMessage

llm = ChatOpenAI(
    model="gpt-4o",          # LLM 모델명
    top_p=0.7,               # 확률 분포 Cut-off
    temperature=1.4,         # 창의성
    max_tokens=10000,          # 응답 길이 제한
    streaming=True           # 스트리밍 활성화
)

# 대화 메시지 구성
messages = [
    SystemMessage(content="너는 스포츠 마케팅팀 전문가야.아래의 대표 페르소나 기반으로 만든 키워드와 인터뷰 설문지를 보고, 무작위 성별, 나이, 직업, 취미를 가진 2000명을 대상으로 제공할 설문지를 작성해줘 COT구조로 생성할거야 1. 아래 질의서에서 주요 공통 키워드 추출 2. 추출한 키워드 기반 설문지 Excel 타입으로 생성."),
    HumanMessage(content= "1. \"육아 틈새 러너, 민진수\"\n1. 주요 키워드 추출\n육아/가정\n바쁜 일상/틈새 시간\n건강(혈압, 콜레스테롤, 복부비만)\n가족 동기부여(딸, 아내)\n새벽 시간\n아파트 단지\n헬스장 대신 러닝\n장비(러닝화, 쿨토시, ‘파워 아빠’ 티셔츠)\n초보 러너\n자기관리 목표\n2. 인터뷰 질의서\n러닝을 시작하게 된 계기는 무엇인가요?\n주로 어떤 시간대에 러닝을 하시나요?\n아이들과 가족이 러닝에 어떤 영향을 주나요?\n러닝할 때 주로 어디에서 뛰시나요?\n러닝 전과 후, 몸이나 마음에 어떤 변화가 있나요?\n러닝 시 착용하는 장비 중 가장 중요한 것은 무엇인가요?\n러닝하면서 가장 힘들다고 느끼는 점은 무엇인가요?\n러닝을 하면서 가장 보람을 느낄 때는 언젠가요?\n앞으로 러닝을 통해 이루고 싶은 목표가 있다면 무엇인가요?\n주변 가족이나 친구에게 러닝을 권하고 싶으신가요? 그 이유는?\n\n2. \"취업성공, 사회초년생 유승연\"\n1. 주요 키워드 추출\n취업 준비/합격 앞둠\nSNS/블로그 기록\n비용 부담(알바, 가성비)\n러닝 연계 행사 및 커뮤니티\n운동 경험(필라테스)\n자기표현(인증샷 욕구)\n야외, 자연\n새로운 인간관계 욕구(숨김)\n초보 러너\n2. 인터뷰 질의서\n러닝을 선택하게 된 이유는 무엇인가요?\n러닝 인증샷이나 기록을 남기는 이유가 있나요?\n블로그나 SNS에 러닝 이야기를 공유해본 적이 있으신가요?\n러닝 관련 용품을 구입할 때 어떤 점을 중요하게 생각하시나요?\n러닝을 하면서 새로운 사람과 교류해본 경험이 있으신가요?\n러닝할 때 주로 어디서 뛰시나요?\n러닝을 통해 얻고 싶은 가장 큰 변화는 무엇인가요?\n혼자 뛸 때와 여러 명이 같이 뛸 때 어떤 차이가 있나요?\n러닝 비용에 대해 어떻게 느끼시나요?\n앞으로 어떤 러닝 행사를 참여해보고 싶으신가요?\n\n3. \"건강하고 싶은 백수, 이재하\"\n1. 주요 키워드 추출\n취업 전/시간 여유\n체력 증진/건강 습관\n가성비/비용 민감\n재미 중시(게임화, 챌린지)\n새로운 도전\n친구/네트워크\n러닝 앱/이벤트\n야외, 자연\n운동 경험 부족\n초보 러너\n2. 인터뷰 질의서\n러닝을 시작하게 된 계기는 무엇인가요?\n러닝에 참여하면서 가장 재미있었던 경험은 무엇인가요?\n러닝을 할 때 주로 무슨 앱이나 서비스를 사용하시나요?\n러닝 관련 챌린지나 이벤트에 참여해본 적 있으신가요?\n러닝을 시작하면서 느낀 가장 큰 변화는 무엇인가요?\n러닝 용품을 살 때 가장 신경 쓰는 점은 무엇인가요?\n러닝하면서 새로운 친구를 만나본 적 있으신가요?\n러닝에서 가장 어렵다고 느끼는 점은 무엇인가요?\n앞으로 러닝을 통해 이루고 싶은 목표가 있으신가요?\n러닝을 남들과 함께 하면 좋은 점은 무엇이라 생각하시나요?\n\n4. \"IT 회사 개발자 김남수\"\n1. 주요 키워드 추출\n대기업 직장인/야근\n스트레스 해소/피로\n앉아 있는 생활/건강 관리\n자기관리 루틴/규칙성\n장비 관심(러닝화, 스마트워치)\n정보 탐색(유튜브)\n부상 위험(무릎, 발목)\n운동 자세, 루틴 고민\n초보 러너\n2. 인터뷰 질의서\n러닝을 시작하게 된 계기는 무엇인가요?\n주로 어떤 시간대에 러닝을 하시나요?\n러닝을 하면서 스트레스 해소에 도움이 되나요?\n러닝 장비 중 가장 중요하게 생각하는 제품은 무엇인가요?\n유튜브 등에서 러닝 관련 정보를 자주 찾으시나요?\n러닝하다가 다친 경험이 있으신가요?\n올바른 러닝 자세에 대해 어떻게 생각하시나요?\n러닝 후 몸에 어떤 변화가 있으셨나요?\n꾸준히 러닝을 하려면 어떤 점이 가장 어렵나요?\n앞으로 러닝과 관련해 배우고 싶은 점이 있다면 무엇인가요?\n\n5. \"살고싶어 뛰는 강기훈 (55세, 남)\"\n1. 주요 키워드 추출\n중년/건강 절박/퇴근 후\n관절 건강/부상 경험\n안전, 저강도 운동 선호\n용품, 브랜드 신뢰/경제력 있음\n배우자와 함께함\n건강 관련 정보 수집(온라인 커뮤니티)\n자연, 산책, 하이킹\n온라인 쇼핑/후기 챙김\n초보 러너\n2. 인터뷰 질의서\n러닝을 시작하게 된 계기는 무엇인가요?\n러닝 외에도 관심 있는 운동이 있으신가요?\n러닝할 때 관절 건강에 신경을 쓰는 편인가요?\n건강용품을 고를 때 가장 중요하게 생각하는 점은 무엇인가요?\n온라인에서 건강 정보를 어떻게 찾으시나요?\n배우자와 함께 운동하시는 경험이 있으신가요?\n러닝을 하면서 가장 걱정되는 점은 무엇인가요?\n용품 구매 시 왜 브랜드 신뢰를 중요하게 보시나요?\n앞으로 러닝을 통해 이루고 싶은 건강 목표가 있다면?\n주로 러닝을 어디서 하시나요(산책, 공원 등)?"              
)
]

line = ""
for chunk in llm.stream(messages):
   line += chunk.content
   print(chunk.content, end="", flush=True)
   if len(line) > 100:  # 100자마다 줄바꿈
       print()
       line = ""
